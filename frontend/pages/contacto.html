<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Contacta con MarAzul - Estamos aquí para ayudarte">
  <title>Contacto - MarAzul</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="../css/variables.css">
  <link rel="stylesheet" href="../css/main.css">
</head>
<body>
  
  <!-- Header Container -->
  <div id="header-container"></div>
  
  <!-- Hero Section -->
  <section class="bg-primary text-white py-5">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto text-center">
          <h1 class="display-4 fw-bold mb-3">Contáctanos</h1>
          <p class="lead">
            ¿Tienes alguna pregunta o sugerencia? Estamos aquí para ayudarte
          </p>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Main Content -->
  <main class="container py-5">
    <div class="row g-5">
      
      <!-- Contact Info -->
      <div class="col-lg-4">
        <div class="sticky-lg-top" style="top: 2rem;">
          
          <h3 class="h4 fw-bold mb-4">Información de Contacto</h3>
          
          <!-- Phone -->
          <div class="d-flex mb-4">
            <div class="flex-shrink-0">
              <div class="bg-primary bg-opacity-10 rounded-circle p-3">
                <i class="bi bi-telephone-fill text-primary fs-4"></i>
              </div>
            </div>
            <div class="flex-grow-1 ms-3">
              <h5 class="fw-semibold mb-1">Teléfono</h5>
              <a href="tel:+56912345678" class="text-decoration-none text-muted">
                +56 9 1234 5678
              </a>
            </div>
          </div>
          
          <!-- Email -->
          <div class="d-flex mb-4">
            <div class="flex-shrink-0">
              <div class="bg-primary bg-opacity-10 rounded-circle p-3">
                <i class="bi bi-envelope-fill text-primary fs-4"></i>
              </div>
            </div>
            <div class="flex-grow-1 ms-3">
              <h5 class="fw-semibold mb-1">Email</h5>
              <a href="mailto:contacto@marazul.cl" class="text-decoration-none text-muted">
                contacto@marazul.cl
              </a>
            </div>
          </div>
          
          <!-- Address -->
          <div class="d-flex mb-4">
            <div class="flex-shrink-0">
              <div class="bg-primary bg-opacity-10 rounded-circle p-3">
                <i class="bi bi-geo-alt-fill text-primary fs-4"></i>
              </div>
            </div>
            <div class="flex-grow-1 ms-3">
              <h5 class="fw-semibold mb-1">Dirección</h5>
              <p class="text-muted mb-0">
                Av. Principal 123<br>
                Santiago, Chile
              </p>
            </div>
          </div>
          
          <!-- Hours -->
          <div class="d-flex mb-4">
            <div class="flex-shrink-0">
              <div class="bg-primary bg-opacity-10 rounded-circle p-3">
                <i class="bi bi-clock-fill text-primary fs-4"></i>
              </div>
            </div>
            <div class="flex-grow-1 ms-3">
              <h5 class="fw-semibold mb-1">Horario</h5>
              <p class="text-muted mb-1">Lunes - Viernes: 9:00 - 18:00</p>
              <p class="text-muted mb-0">Sábado: 9:00 - 14:00</p>
            </div>
          </div>
          
          <!-- Social Media -->
          <div class="mt-4">
            <h5 class="fw-semibold mb-3">Síguenos</h5>
            <div class="d-flex gap-2">
              <a href="#" class="btn btn-outline-primary btn-sm" aria-label="Facebook">
                <i class="bi bi-facebook"></i>
              </a>
              <a href="#" class="btn btn-outline-primary btn-sm" aria-label="Instagram">
                <i class="bi bi-instagram"></i>
              </a>
              <a href="#" class="btn btn-outline-success btn-sm" aria-label="WhatsApp">
                <i class="bi bi-whatsapp"></i>
              </a>
            </div>
          </div>
          
        </div>
      </div>
      
      <!-- Contact Form -->
      <div class="col-lg-8">
        <div class="card border-0 shadow-sm">
          <div class="card-body p-4 p-md-5">
            
            <h3 class="h4 fw-bold mb-4">Envíanos un mensaje</h3>
            
            <!-- Alert Messages -->
            <div id="alert-container"></div>
            
            <!-- Form -->
            <form id="contact-form" novalidate>
              
              <div class="row g-3">
                
                <!-- Name -->
                <div class="col-md-6">
                  <label for="name" class="form-label fw-semibold">
                    Nombre Completo <span class="text-danger">*</span>
                  </label>
                  <input 
                    type="text" 
                    class="form-control" 
                    id="name" 
                    name="name"
                    placeholder="Tu nombre"
                    required
                    autocomplete="name">
                  <div class="invalid-feedback">
                    El nombre es requerido.
                  </div>
                </div>
                
                <!-- Email -->
                <div class="col-md-6">
                  <label for="email" class="form-label fw-semibold">
                    Correo Electrónico <span class="text-danger">*</span>
                  </label>
                  <input 
                    type="email" 
                    class="form-control" 
                    id="email" 
                    name="email"
                    placeholder="tucorreo@ejemplo.com"
                    required
                    autocomplete="email">
                  <div class="invalid-feedback">
                    Por favor ingresa un correo válido.
                  </div>
                </div>
                
                <!-- Subject -->
                <div class="col-12">
                  <label for="subject" class="form-label fw-semibold">
                    Asunto <span class="text-danger">*</span>
                  </label>
                  <select 
                    class="form-select" 
                    id="subject" 
                    name="subject"
                    required>
                    <option value="">Selecciona un asunto</option>
                    <option value="consulta-general">Consulta General</option>
                    <option value="pedido">Consulta sobre Pedido</option>
                    <option value="productos">Información de Productos</option>
                    <option value="sugerencia">Sugerencia</option>
                    <option value="reclamo">Reclamo</option>
                    <option value="otro">Otro</option>
                  </select>
                  <div class="invalid-feedback">
                    Por favor selecciona un asunto.
                  </div>
                </div>
                
                <!-- Message -->
                <div class="col-12">
                  <label for="message" class="form-label fw-semibold">
                    Mensaje <span class="text-danger">*</span>
                  </label>
                  <textarea 
                    class="form-control" 
                    id="message" 
                    name="message"
                    rows="6"
                    placeholder="Escribe tu mensaje aquí..."
                    required></textarea>
                  <div class="invalid-feedback">
                    El mensaje es requerido.
                  </div>
                  <div class="form-text">
                    <span id="char-count">0</span>/500 caracteres
                  </div>
                </div>
                
                <!-- Privacy Policy -->
                <div class="col-12">
                  <div class="form-check">
                    <input 
                      class="form-check-input" 
                      type="checkbox" 
                      id="privacy" 
                      name="privacy"
                      required>
                    <label class="form-check-label" for="privacy">
                      Acepto la <a href="#" class="text-decoration-none">política de privacidad</a> 
                      y el tratamiento de mis datos
                    </label>
                    <div class="invalid-feedback">
                      Debes aceptar la política de privacidad.
                    </div>
                  </div>
                </div>
                
                <!-- Submit Button -->
                <div class="col-12 mt-4">
                  <button 
                    type="submit" 
                    class="btn btn-primary px-5 py-2"
                    id="submit-btn">
                    <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                    <span class="btn-text">
                      <i class="bi bi-send me-2"></i>Enviar Mensaje
                    </span>
                  </button>
                </div>
                
              </div>
              
            </form>
            
          </div>
        </div>
      </div>
      
    </div>
  </main>
  
  <!-- Footer Container -->
  <div id="footer-container"></div>
  
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Custom JS -->
  <script type="module">
    import { showAlert, validateForm } from '../js/utils.js';
    
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('contact-form');
      const submitBtn = document.getElementById('submit-btn');
      const messageInput = document.getElementById('message');
      const charCount = document.getElementById('char-count');
      
      // Character counter
      messageInput?.addEventListener('input', () => {
        const length = messageInput.value.length;
        charCount.textContent = length;
        
        if (length > 500) {
          messageInput.value = messageInput.value.substring(0, 500);
          charCount.textContent = 500;
        }
      });
      
      // Handle form submit
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        if (!validateForm(form)) return;
        
        const formData = new FormData(form);
        const contactData = {
          name: formData.get('name'),
          email: formData.get('email'),
          subject: formData.get('subject'),
          message: formData.get('message')
        };
        
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.querySelector('.spinner-border').classList.remove('d-none');
        submitBtn.querySelector('.btn-text').innerHTML = 'Enviando...';
        
        try {
          // TODO: Replace with actual API call
          // const response = await ContactService.send(contactData);
          
          // Simulate API call
          await new Promise(resolve => setTimeout(resolve, 1500));
          
          showAlert('success', '¡Mensaje enviado exitosamente! Te responderemos pronto.');
          form.reset();
          charCount.textContent = '0';
          
        } catch (error) {
          console.error('Contact error:', error);
          showAlert('danger', 'Error al enviar el mensaje. Intenta nuevamente.');
        } finally {
          submitBtn.disabled = false;
          submitBtn.querySelector('.spinner-border').classList.add('d-none');
          submitBtn.querySelector('.btn-text').innerHTML = '<i class="bi bi-send me-2"></i>Enviar Mensaje';
        }
      });
    });
  </script>
  
</body>
</html>